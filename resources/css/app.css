@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CSS VARIABLES & THEME SYSTEM
======================================== */
:root {
    --color-primary: 99 102 241;
    --color-primary-dark: 79 70 229;
    --sidebar-width: 280px;
    --sidebar-collapsed: 80px;
    --header-height: 64px;
    --transition-base: 200ms ease;
    --transition-smooth: 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dark mode with pure neutral grays - no blue tint */
.dark {
    color-scheme: dark;
    --dark-bg: #0a0a0a;
    --dark-surface: #141414;
    --dark-surface-2: #1c1c1c;
    --dark-border: #2a2a2a;
    --dark-text: #e5e5e5;
    --dark-text-muted: #a3a3a3;

    /* Override primary to be monochrome in dark mode */
    --color-primary: 255 255 255;
    --color-primary-dark: 229 229 229;
}

/* ========================================
   BASE STYLES
======================================== */
@layer base {
    * {
        @apply border-gray-200;
    }

    .dark * {
        border-color: #2a2a2a;
    }

    html {
        @apply scroll-smooth;
    }

    body {
        @apply bg-gray-50 text-gray-900 antialiased;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }

    html.dark body {
        background-color: #0a0a0a;
        color: #e5e5e5;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply font-semibold tracking-tight text-gray-900;
    }

    html.dark h1,
    html.dark h2,
    html.dark h3,
    html.dark h4,
    html.dark h5,
    html.dark h6 {
        color: #ffffff;
    }

    ::selection {
        @apply bg-indigo-500 text-white;
    }

    html.dark ::selection {
        @apply bg-gray-600 text-white;
    }
}

/* ========================================
   COMPONENT STYLES
======================================== */
@layer components {

    /* --- Layout --- */
    .app-container {
        @apply flex h-screen bg-gray-50 overflow-hidden;
    }

    html.dark .app-container {
        background-color: #0a0a0a;
    }

    .main-content {
        @apply flex-1 flex flex-col h-full overflow-hidden relative;
    }

    .content-area {
        @apply flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 scrollbar-thin;
    }

    /* --- Header --- */
    .app-header {
        @apply sticky top-0 z-40 flex items-center justify-between h-16 px-6 bg-white/80 backdrop-blur-xl border-b border-gray-200/50;
    }

    html.dark .app-header {
        background-color: rgba(20, 20, 20, 0.8);
        border-color: #2a2a2a;
    }

    /* --- Sidebar --- */
    .sidebar {
        @apply fixed inset-y-0 left-0 z-50 flex flex-col w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static;
    }

    html.dark .sidebar {
        background-color: #141414;
        border-color: #2a2a2a;
    }

    .sidebar-overlay {
        @apply fixed inset-0 z-40 bg-black/50 backdrop-blur-sm lg:hidden;
    }

    .nav-item {
        @apply flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200;
    }

    html.dark .nav-item {
        color: #a3a3a3;
    }

    html.dark .nav-item:hover {
        background-color: #1c1c1c;
        color: #ffffff;
    }

    .nav-item-active {
        @apply bg-indigo-50 text-indigo-600 hover:bg-indigo-100;
    }

    html.dark .nav-item-active {
        background-color: rgba(99, 102, 241, 0.1);
        color: #818cf8;
    }

    html.dark .nav-item-active:hover {
        background-color: rgba(99, 102, 241, 0.15);
    }

    .nav-icon {
        @apply w-5 h-5 flex-shrink-0;
    }

    /* --- Cards --- */
    .card {
        @apply bg-white rounded-2xl border border-gray-200 shadow-sm transition-all duration-200;
    }

    html.dark .card {
        background-color: #141414;
        border-color: #2a2a2a;
    }

    .card-hover {
        @apply hover:shadow-lg hover:border-gray-300 hover:-translate-y-0.5;
    }

    html.dark .card-hover:hover {
        border-color: #404040;
    }

    .card-header {
        @apply px-6 py-4 border-b border-gray-100;
    }

    html.dark .card-header {
        border-color: #2a2a2a;
    }

    .card-body {
        @apply p-6;
    }

    /* --- Stat Cards --- */
    .stat-card {
        @apply card p-6 relative overflow-hidden;
    }

    .stat-card::before {
        content: '';
        @apply absolute top-0 left-0 w-1 h-full;
    }

    .stat-card-indigo::before {
        background-color: rgb(var(--color-primary));
    }

    html.dark .stat-card-indigo::before {
        background-color: #ec4899;
        /* Changed to Pink/Neutral or kept distinct? User said 'nada azulado'. Let's use white? */
        background-color: #e5e5e5;
    }

    .stat-card-emerald::before {
        @apply bg-emerald-500;
    }

    .stat-card-amber::before {
        @apply bg-amber-500;
    }

    .stat-card-rose::before {
        @apply bg-rose-500;
    }

    .stat-card-blue::before {
        @apply bg-blue-500;
    }

    .stat-icon {
        @apply w-10 h-10 rounded-xl flex items-center justify-center;
    }

    .stat-value {
        @apply text-3xl font-bold text-gray-900;
    }

    html.dark .stat-value {
        color: #ffffff;
    }

    .stat-label {
        @apply text-sm font-medium text-gray-500;
    }

    html.dark .stat-label {
        color: #a3a3a3;
    }

    /* --- Buttons --- */
    .btn {
        @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98];
    }

    html.dark .btn {
        --tw-ring-offset-color: #0a0a0a;
    }

    .btn-primary {
        @apply btn text-white shadow-lg transition-all duration-200;
        background-color: rgb(var(--color-primary));
        box-shadow: 0 10px 15px -3px rgba(var(--color-primary), 0.25);
    }

    .btn-primary:hover {
        background-color: rgb(var(--color-primary-dark));
    }

    .btn-primary:focus {
        @apply ring-2 ring-offset-2;
        --tw-ring-color: rgb(var(--color-primary));
    }

    html.dark .btn-primary {
        background-color: #e5e5e5;
        /* White/Light Gray */
        color: #0a0a0a;
        /* Black Text */
        box-shadow: 0 4px 6px -1px rgba(255, 255, 255, 0.1);
    }

    html.dark .btn-primary:hover {
        background-color: #ffffff;
    }

    .btn-secondary {
        @apply btn bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-300;
    }

    html.dark .btn-secondary {
        background-color: #1c1c1c;
        color: #e5e5e5;
        border-color: #404040;
    }

    html.dark .btn-secondary:hover {
        background-color: #262626;
    }

    .btn-danger {
        @apply btn bg-rose-600 text-white shadow-lg shadow-rose-500/25 hover:bg-rose-700 hover:shadow-rose-500/40 focus:ring-rose-500;
    }

    .btn-ghost {
        @apply btn text-gray-600 hover:bg-gray-100 hover:text-gray-900;
    }

    html.dark .btn-ghost {
        color: #a3a3a3;
    }

    html.dark .btn-ghost:hover {
        background-color: #1c1c1c;
        color: #ffffff;
    }

    .btn-icon {
        @apply p-2 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors duration-200;
    }

    html.dark .btn-icon {
        color: #a3a3a3;
    }

    html.dark .btn-icon:hover {
        background-color: #1c1c1c;
        color: #e5e5e5;
    }

    /* Button Sizes */
    .btn-sm {
        @apply px-3 py-1.5 text-xs rounded-lg gap-1.5;
    }

    .btn-md {
        @apply px-4 py-2 text-sm gap-2;
    }

    .btn-lg {
        @apply px-6 py-2.5 text-base gap-2;
    }

    .btn svg {
        @apply w-4 h-4 flex-shrink-0;
    }

    .btn-sm svg {
        @apply w-3.5 h-3.5;
    }

    /* --- Forms --- */
    .form-container {
        @apply max-w-2xl mx-auto;
    }

    .form-card {
        @apply card;
    }

    .form-body {
        @apply p-6 sm:p-8;
    }

    .form-section {
        @apply space-y-6;
    }

    .form-group {
        @apply space-y-1.5;
    }

    .form-row {
        @apply grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6;
    }

    .form-actions {
        @apply flex items-center justify-end gap-3 pt-6 mt-6 border-t border-gray-200;
    }

    html.dark .form-actions {
        border-color: #2a2a2a;
    }

    .form-label {
        @apply block text-sm font-medium text-gray-700 mb-1.5;
    }

    html.dark .form-label {
        color: #d4d4d4;
    }

    .form-input {
        @apply w-full px-4 py-2.5 rounded-xl text-sm bg-white border border-gray-300 text-gray-900 placeholder-gray-400 transition-all duration-200;
    }

    .form-input:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        border-color: rgb(var(--color-primary));
        box-shadow: 0 0 0 2px rgba(var(--color-primary), 0.2);
    }

    html.dark .form-input {
        background-color: #1c1c1c;
        border-color: #404040;
        color: #e5e5e5;
    }

    html.dark .form-input::placeholder {
        color: #737373;
    }

    html.dark .form-input:focus {
        border-color: #e5e5e5;
        box-shadow: 0 0 0 2px rgba(229, 229, 229, 0.1);
    }

    .form-select {
        @apply form-input appearance-none cursor-pointer pr-10;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3E%3C/svg%3E");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.25rem 1.25rem;
    }

    .form-textarea {
        @apply form-input resize-none;
    }

    .form-checkbox {
        .form-checkbox {
            @apply w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer;
            color: rgb(var(--color-primary));
        }

        .form-checkbox:focus {
            --tw-ring-color: rgb(var(--color-primary));
        }
    }

    html.dark .form-checkbox {
        background-color: #1c1c1c;
        border-color: #404040;
    }

    /* === TABLES (Compact & Aligned) === */
    .table-container {
        @apply overflow-x-auto rounded-lg border border-gray-100 dark:border-gray-800;
    }

    .table {
        @apply w-full text-sm;
        border-collapse: collapse;
    }

    .table thead {
        @apply bg-gray-50 dark:bg-gray-800/50;
        border-bottom: 1px solid #e5e7eb;
    }

    html.dark .table thead {
        border-bottom-color: #404040;
    }

    /* Headers: Left aligned by default, uppercase, compact */
    .table th {
        @apply px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider whitespace-nowrap;
        text-align: left;
        height: 2.5rem;
        /* Compact header 40px */
        vertical-align: middle;
    }

    html.dark .table th {
        color: #9ca3af;
    }

    /* Body Rows: Hover effect, Border bottom */
    .table tbody tr {
        border-bottom: 1px solid #f3f4f6;
        transition: background-color 0.15s;
    }

    html.dark .table tbody tr {
        border-bottom-color: #262626;
    }

    .table tbody tr:hover {
        @apply bg-gray-50 dark:bg-gray-800/50;
    }

    .table tbody tr:last-child {
        border-bottom: none;
    }

    /* Cells: Left aligned by default, compact */
    .table td {
        @apply px-4 py-2;
        text-align: left;
        vertical-align: middle;
        height: 2.5rem;
        /* Compact row 40px */
        white-space: nowrap;
        /* Prevent wrapping for compactness */
    }

    /* Text wrapping for potentially long columns */
    .table td.wrap-text {
        white-space: normal;
        min-width: 200px;
        max-width: 400px;
    }

    /* === ALIGNMENT UTILITIES === */
    /* Strict alignment classes for both th and td */
    .table th.text-center,
    .table td.text-center {
        text-align: center;
    }

    .table th.text-right,
    .table td.text-right {
        text-align: right;
    }

    .table th.text-left,
    .table td.text-left {
        text-align: left;
    }

    /* Flex helpers for cells that need it (like actions) */
    .table td .flex-end {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 0.5rem;
    }

    .table td .flex-center {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
    }

    /* --- Badges --- */
    .badge {
        @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold;
    }

    .badge-success {
        @apply bg-emerald-100 text-emerald-700;
    }

    html.dark .badge-success {
        background-color: rgba(16, 185, 129, 0.15);
        color: #34d399;
    }

    .badge-warning {
        @apply bg-amber-100 text-amber-700;
    }

    html.dark .badge-warning {
        background-color: rgba(245, 158, 11, 0.15);
        color: #fbbf24;
    }

    .badge-danger {
        @apply bg-rose-100 text-rose-700;
    }

    html.dark .badge-danger {
        background-color: rgba(244, 63, 94, 0.15);
        color: #fb7185;
    }

    .badge-info {
        @apply bg-blue-100 text-blue-700;
    }

    html.dark .badge-info {
        background-color: rgba(59, 130, 246, 0.15);
        color: #60a5fa;
    }

    .badge-neutral {
        @apply bg-gray-100 text-gray-700;
    }

    html.dark .badge-neutral {
        background-color: #262626;
        color: #d4d4d4;
    }

    /* --- Alerts --- */
    .alert {
        @apply flex items-center gap-3 p-4 rounded-xl text-sm font-medium;
    }

    .alert-success {
        @apply bg-emerald-50 text-emerald-800 border border-emerald-200;
    }

    html.dark .alert-success {
        background-color: rgba(16, 185, 129, 0.1);
        color: #34d399;
        border-color: rgba(16, 185, 129, 0.2);
    }

    .alert-warning {
        @apply bg-amber-50 text-amber-800 border border-amber-200;
    }

    html.dark .alert-warning {
        background-color: rgba(245, 158, 11, 0.1);
        color: #fbbf24;
        border-color: rgba(245, 158, 11, 0.2);
    }

    .alert-danger {
        @apply bg-rose-50 text-rose-800 border border-rose-200;
    }

    html.dark .alert-danger {
        background-color: rgba(244, 63, 94, 0.1);
        color: #fb7185;
        border-color: rgba(244, 63, 94, 0.2);
    }

    .alert-info {
        @apply bg-blue-50 text-blue-800 border border-blue-200;
    }

    html.dark .alert-info {
        background-color: rgba(59, 130, 246, 0.1);
        color: #60a5fa;
        border-color: rgba(59, 130, 246, 0.2);
    }

    /* --- Avatar --- */
    .avatar {
        @apply relative inline-flex items-center justify-center rounded-full bg-gray-200 text-gray-600 font-semibold;
    }

    html.dark .avatar {
        background-color: #262626;
        color: #d4d4d4;
    }

    .avatar-sm {
        @apply w-8 h-8 text-xs;
    }

    .avatar-md {
        @apply w-10 h-10 text-sm;
    }

    .avatar-lg {
        @apply w-12 h-12 text-base;
    }

    /* --- Progress --- */
    .progress {
        @apply w-full h-2 bg-gray-200 rounded-full overflow-hidden;
    }

    html.dark .progress {
        background-color: #262626;
    }

    .progress-bar {
        @apply h-full rounded-full transition-all duration-500;
    }

    /* --- Empty State --- */
    .empty-state {
        @apply flex flex-col items-center justify-center py-12 text-center;
    }

    .empty-state-icon {
        @apply w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4;
    }

    html.dark .empty-state-icon {
        background-color: #1c1c1c;
    }

    /* --- Divider --- */
    .divider {
        @apply border-t border-gray-200;
    }

    html.dark .divider {
        border-color: #2a2a2a;
    }

    /* --- Score Colors --- */
    .score-excellent {
        @apply text-emerald-600;
    }

    html.dark .score-excellent {
        color: #34d399;
    }

    .score-good {
        @apply text-emerald-500;
    }

    html.dark .score-good {
        color: #6ee7b7;
        /* Emerald 300 */
    }

    .score-average {
        @apply text-amber-600;
    }

    html.dark .score-average {
        color: #fbbf24;
    }

    .score-poor {
        @apply text-rose-600;
    }

    html.dark .score-poor {
        color: #fb7185;
    }

    /* --- Animations --- */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(8px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
}

/* ========================================
   UTILITY CLASSES
======================================== */
@layer utilities {
    .text-gradient {
        @apply bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600;
    }

    .glass {
        @apply bg-white/70 backdrop-blur-xl;
    }

    html.dark .glass {
        background-color: rgba(20, 20, 20, 0.7);
    }

    .scrollbar-thin {
        scrollbar-width: thin;
        scrollbar-color: #d4d4d4 transparent;
    }

    html.dark .scrollbar-thin {
        scrollbar-color: #404040 transparent;
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: #d4d4d4;
        border-radius: 3px;
    }

    html.dark .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: #404040;
    }
}